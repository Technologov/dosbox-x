<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>Managing images files</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./rouge-github.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>Back to the <a href="Home">DOSBox-X Wiki Welcome page</a>.</p>
</div>
<div class="sect1">
<h2 id="_managing_images_files">Managing images files</h2>
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_managing_images_files">Managing images files</a></li>
<li><a href="#_overview">Overview</a></li>
<li><a href="#_listing_current_mounts">Listing current mounts</a></li>
<li><a href="#_diskette_floppy_disk_images">Diskette (floppy disk) images</a>
<ul class="sectlevel2">
<li><a href="#_creating_diskette_images">Creating diskette images</a></li>
<li><a href="#_mounting_diskette_images">Mounting diskette images</a></li>
<li><a href="#_unmounting_diskette_images">Unmounting diskette images</a></li>
<li><a href="#_boot_from_a_diskette_image">Boot from a diskette image</a></li>
<li><a href="#_using_diskette_images_in_linux">Using diskette images in Linux</a></li>
<li><a href="#_using_diskette_images_in_windows">Using diskette images in Windows</a></li>
<li><a href="#_using_diskette_images_in_macos">Using diskette images in macOS</a></li>
</ul>
</li>
<li><a href="#_harddisk_images">Harddisk images</a>
<ul class="sectlevel2">
<li><a href="#_creating_harddisk_images">Creating harddisk images</a></li>
<li><a href="#_creating_harddisk_images_from_folder_mounts">Creating harddisk images from folder mounts</a></li>
<li><a href="#_mounting_harddisk_images">Mounting harddisk images</a></li>
<li><a href="#_specifying_the_partition_to_mount">Specifying the partition to mount</a></li>
<li><a href="#_unmounting_harddisk_images">Unmounting harddisk images</a></li>
<li><a href="#_booting_from_a_harddisk_image">Booting from a harddisk image</a></li>
<li><a href="#_using_harddisk_images_in_linux">Using harddisk images in Linux</a></li>
<li><a href="#_using_harddisk_images_in_windows">Using harddisk images in Windows</a></li>
<li><a href="#_using_harddisk_images_in_macos">Using harddisk images in macOS</a></li>
</ul>
</li>
<li><a href="#_cd_rom_or_dvd_images">CD-ROM or DVD images</a>
<ul class="sectlevel2">
<li><a href="#_copy_protected_media">Copy protected media</a></li>
<li><a href="#_mounting_cd_or_dvd_images">Mounting CD or DVD images</a></li>
<li><a href="#_rock_ridge_joliet_and_udf">Rock Ridge, Joliet and UDF</a></li>
<li><a href="#_mounting_an_empty_cd_rom_drive">Mounting an empty CD-ROM drive</a></li>
<li><a href="#_accessing_a_cd_or_dvd_in_real_dos">Accessing a CD or DVD in real DOS</a></li>
<li><a href="#_mounting_multiple_cd_or_dvd_images">Mounting multiple CD or DVD images</a></li>
<li><a href="#_mounting_from_the_drive_menu_3">Mounting from the Drive menu</a></li>
<li><a href="#_unmounting_cd_or_dvd_images">Unmounting CD or DVD images</a></li>
<li><a href="#_boot_from_a_cd_or_dvd_image">Boot from a CD or DVD image</a></li>
<li><a href="#_using_cd_or_dvd_images_in_linux">Using CD or DVD images in Linux</a></li>
<li><a href="#_using_cd_or_dvd_images_in_windows">Using CD or DVD images in Windows</a></li>
<li><a href="#_using_cd_or_dvd_images_in_macos">Using CD or DVD images in macOS</a></li>
</ul>
</li>
<li><a href="#_copying_files_into_or_out_of_image_files_from_dosbox_x">Copying files into or out of image files from DOSBox-X</a></li>
<li><a href="#_creating_a_ram_drive">Creating a RAM drive</a></li>
<li><a href="#_qcow2_support">QCOW2 support</a></li>
<li><a href="#_vhd_support">VHD support</a></li>
<li><a href="#_archiving_diskettes">Archiving diskettes</a></li>
<li><a href="#_fdisk">FDISK</a></li>
<li><a href="#_format">FORMAT</a></li>
<li><a href="#_known_limitations">Known limitations</a></li>
<li><a href="#_outstanding_issues_with_this_page">Outstanding issues with this page</a></li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X supports three categories of image files;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Diskette (floppy disk) images</p>
</li>
<li>
<p>Harddisk images</p>
</li>
<li>
<p>CD-ROM or DVD images</p>
</li>
</ul>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Whenever this guide mentions mounting an image file, such as <code>disk.ima</code>, <code>hdd.img</code> or <code>cdrom.iso</code>, those are files on your host filesystem.
And they may optionally be prefixed with the host path to the file. e.g. <code>disk.ima</code> may become <code>"C:\Users\John Doe\dosroot\disk.ima"</code>.
Also note that if there are any spaces in the host path or filename, you need to enclose it with quotes.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_listing_current_mounts">Listing current mounts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The currently active mounts can be viewed by running the <code>IMGMOUNT</code> or <code>MOUNT</code> commands without arguments.
The output of the two commands differs somewhat.</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>MOUNT</code> will show all active mounts</p>
</li>
<li>
<p><code>IMGMOUNT</code> will show mounted images, and the device numbers (drive numbers) in use</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can also see the currently mounted drive numbers from the "DOS" menu with the "Show mounted drive numbers" option, and the mounted harddisks or CD-ROM&#8217;s with the "Show IDE disk or CD status" option.
Note that both of these options will only show image mounts, not folder mounts.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_diskette_floppy_disk_images">Diskette (floppy disk) images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X supports mounting diskette (aka Floppy) images in the following formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>RAW MFM sector image format (typically ending in <code>.ima</code> or <code>.img</code>)</p>
</li>
<li>
<p>IBM XDF (ending in <code>.xdf</code>)</p>
</li>
<li>
<p>Microsoft DMF (typically ending in <code>.dmf</code>)</p>
</li>
<li>
<p>NEC PC-98 diskette images (typically ending in <code>.fdd</code>, <code>.fdi</code>, <code>.nfd</code> or <code>.d88</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>.IMG</code> extension is also used for harddisk images, so there can be some confusion.
Files with the extension <code>.IMA</code> are automatically treated as diskette images.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
There is no support for any type of copy-protected diskettes.
Any programs on copy-protected diskettes need to be "cracked" to remove the copy protection before they can be used by DOSBox-X.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Some examples of diskette image files that DOSBox-X <strong>does not</strong> support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://github.com/joncampbell123/dosbox-x/issues/1466">IBM DSKF</a> (<code>.DSK</code>)</p>
</li>
<li>
<p><a href="https://github.com/joncampbell123/dosbox-x/issues/711">ImageDisk</a> (<code>.IMD</code>)</p>
</li>
<li>
<p>Interchangeable Preservation Format (<code>.IPF</code>)</p>
</li>
<li>
<p><a href="https://github.com/joncampbell123/dosbox-x/issues/4288">KryoFlux Stream files</a> (<code>.RAW</code>)</p>
</li>
<li>
<p>Teledisk (<code>.TD0</code>)</p>
</li>
<li>
<p>Transcopy (<code>.TC</code>)</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
While DOSBox-X does not support mounting or booting from diskette images in IBM DSKF format, it is possible to use the <code><a href="https://ftpmirror.your.org/pub/misc/ftp.software.ibm.com/storage/adsm/tools/loaddskf/loaddskf.exe">LOADDSKF.EXE</a></code> program in DOSBox-X to convert an IBM DSKF file to a regular RAW MFM Disk format.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_creating_diskette_images">Creating diskette images</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In addition to the below DOSBox-X command line utility, it is possible to create diskette images at any time from the DOSBox-X menu.
Go to the "DOS" menu, and select "Create blank disk image&#8230;&#8203;".
This option allows most common floppy disk types to be created, for less common types you need to use the command line utility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>DOSBox-X has a built-in <code>IMGMAKE</code> command with which you can create FAT12 formatted diskette images in RAW MFM sector image format from the DOSBox-X command prompt.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE disk.ima -t fd</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE disk.ima -t fd_1440</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will create a 1.44MB formatted disk image named <code>disk.ima</code>.
The diskette image will appear to have been formatted by MS-DOS 5.0.</p>
</div>
<div class="paragraph">
<p>The image filename for this command is optional, and if you do not specify a filename, then the name <code>IMGMAKE.IMG</code> will be used, such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE -t fd</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The filename for the disk image is not limited to the DOS 8.3 filename length, but rather by your host filesystem. In DOSBox-X you can also specify the <code>-force</code> parameter to overwrite the file if it already exists.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can optionally create a diskette image that is not formatted with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE disk.ima -t fd -nofs</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X does not supply a FORMAT command, so creating diskette images that are not formatted is typically not recommended.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
DOSBox-X will automatically assume it is a diskette image if the filename extension is <code>.IMA</code>, or if you&#8217;re mounting on the emulated <code>A:</code> or <code>B:</code> drive.
If this is not the case, you can force DOSBox-X to treat an image as a diskette type with the <code>-t floppy</code> parameter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Supported diskette sizes options:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 16.667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Disk type</th>
<th class="tableblock halign-left valign-top">Sides</th>
<th class="tableblock halign-left valign-top">Tracks per Side</th>
<th class="tableblock halign-left valign-top">Sectors per Track</th>
<th class="tableblock halign-left valign-top">Capacity</th>
<th class="tableblock halign-left valign-top">IMGMAKE option</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.25" SSDD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">160KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_160</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>5.25" SSDD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">180KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_180</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.25" SSDD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">200KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_200</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.25" DSDD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">320KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_320</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>5.25" DSDD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">360KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_360</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5.25" DSDD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">400KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_400</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>5.25" HD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">15</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1200KB (1.2MB)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_1200</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5" DSDD (2DD)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">9</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">720KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_720</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>3.5" HD</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">18</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1440KB (1.44MB)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_1440</code> or <code>-t fd</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5" ED</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">36</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2880KB (2.88MB)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t fd_2880</code></p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Common PC disk types in bold. The 8-sector formats should be avoided unless you need backward compatibility with DOS 1.x.
The 10-sector disks were used by the DEC Rainbow 100, and should likewise be avoided for compatibility reasons.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_diskette_images">Mounting diskette images</h3>
<div class="paragraph">
<p>Mounting a diskette image in DOSBox-X is typically as simple as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a disk.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount A: disk.ima
imgmount A: disk.ima -t floppy</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not specify an image filename, then the name <code>IMGMAKE.IMG</code> will be used, such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>-t floppy</code> parameter is only needed with DOSBox-X when the extension is not <code>.IMA</code>, and you&#8217;re wanting to mount a diskette image on drives greater than <code>B:</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A diskette image that is not formatted, or has an unsupported filesystem can be attached as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 0 disk.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 0 disk.ima -fs none</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>0 represents drive <code>A:</code> and 1 represents drive <code>B:</code>, but due to the use of drive numbers they cannot be directly accessed from the DOSBox-X integrated DOS. Note that when using drive numbers like 0 and 1 to mount a diskette image the <code>-fs none</code> flag is automatically assumed in DOSBox-X. For vanilla DOSBox, or other forks, the <code>-fs none</code> flag will be required.</p>
</div>
<div class="sect3">
<h4 id="_mounting_an_empty_floppy_disk_drive">Mounting an empty floppy disk drive</h4>
<div class="paragraph">
<p>Starting with DOSBox-X 2024.03.01 it is possible to mount an empty floppy drive.
This is really only if you intend to boot a guest OS, and want to be able to insert a diskette in the drive after booting using the DOSBox-X drop-down menu&#8217;s.</p>
</div>
<div class="paragraph">
<p>When no <code>-size</code> option is specified, a 3.5" 1.44MB drive type is emulated.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 0 empty -fs none -t floppy</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>To emulate an empty 5.25" 1.2MB drive as the first floppy drive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 0 empty -fs none -t floppy -size 512,15,2,80</span></code></pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 16.6666%;">
<col style="width: 66.6668%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Drive type</th>
<th class="tableblock halign-left valign-top"><code>-size</code> option</th>
<th class="tableblock halign-left valign-top">Notes</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SS/DD 5.25" 160KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,8,1,40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only really for DOS 1.x backward compatibility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SS/DD 5.25" 180KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,9,1,40</p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS/DD 5.25" 320KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,8,2,40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only really for DOS 1.x backward compatibility</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS/DD 5.25" 360KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,9,2,40</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can also R/W 5.25" SS/DD media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS/HD 5.25" 1.2MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,15,2,80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can also R/W all other 5.25" media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS/DD 3.5" 720KB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,9,2,80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can also R/W 3.5" SS/DD media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS/HD 3.5" 1.44MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,18,2,80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can also R/W 3.5" SS/DD and DS/DD media</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DS/ED 3.5" 2.88MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">512,36,2,80</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can also R/W all other 3.5" media</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The two most common and useful drive types to emulate are the 5.25" 1.2MB and the 3.5" 1.44MB varieties as they can each read and write lower capacity variants of the same physical media size.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The current DOSBox-X release seems to have a bug where Win9x will only see the first floppy drive.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_mounting_from_the_drive_menu">Mounting from the Drive menu</h4>
<div class="paragraph">
<p>The advantage of this option is, that you don&#8217;t need to mount all the disks before starting your program or game, but you can mount disk images when needed.</p>
</div>
<div class="paragraph">
<p>To access it, DOSBox-X needs to be in windowed mode, there is a menu bar with a "Drive" drop-down. Select a drive letter, and you will see various mount options.</p>
</div>
<div class="paragraph">
<p>The only mount option that can be used for image files is the "Mount disk image" option.
All the other mount options are host folder mounts.</p>
</div>
<div class="paragraph">
<p>Select the Drive menu, and the "A" or "B" drive and "Mount disk image".
Now a file browser will allow you to select an image file.</p>
</div>
<div class="paragraph">
<p>Limitations of this option, compared to the DOSBox-X command line:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>No support for marking a diskette image as read-only.</p>
</li>
<li>
<p>No ability to specify multiple diskette images for use with the swap-disk functionality.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_mounting_multiple_diskette_images">Mounting multiple diskette images</h4>
<div class="paragraph">
<p>Some DOS programs or games came on multiple diskettes.
For this purpose it is possible to mount multiple diskette images on one drive letter and swap between them.
e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a disk1.ima disk2.ima disk3.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example <code>disk1.ima</code> will be immediately usable on drive <code>A:</code> but <code>disk2.ima</code> will require a disk-swap action.</p>
</div>
<div class="paragraph">
<p>Disk-swap can be done using either a hot-key combination, or using the menu bar.
The hot-key for Windows is F11+CTRL+D and for other platforms F12+CTRL+D.
Or from the menu you can select "DOS" followed by "Swap floppy".
Lastly, you can use the <code>IMGSWAP</code> command to swap between images.</p>
</div>
<div class="paragraph">
<p>If you lose track of which disk is currently active, open the 'Drive' menu option, select the drive letter and select 'Drive Information'.
This information can also be retrieved from the <code>IMGSWAP</code> command.</p>
</div>
</div>
<div class="sect3">
<h4 id="_write_protecting_diskette_images">Write protecting diskette images</h4>
<div class="paragraph">
<p>By default, diskette images are mounted read-write.
It is possible to make a diskette image read-only (write protected) either by using the <code>-ro</code> option, or by attaching the <code>:</code> prefix to the filename.
e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a disk.ima -ro</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a :disk.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>They can also be used when mounting multiple diskette images.
If you use the <code>-ro</code> option, then all images specified in the command will become read-only.
On the other hand, if you wish to make individual images read-only (instead of all of them), then you can attach the <code>:</code> prefix to these images, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a :disk1.ima :disk2.ima :disk3.ima userdisk.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In the above example, the first 3 disks are read-only, but the last one is read-write.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_unmounting_diskette_images">Unmounting diskette images</h3>
<div class="paragraph">
<p>Diskette images can be unmounted using the <code>-u</code> flag. e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also unmount using the <code>MOUNT</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mount a -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to unmount the currently mounted image (if any), and mount a new image in one step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a disk2.ima -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will cause the currently mounted disk image (if any) to be unmounted, and <code>disk2.ima</code> to be mounted instead.</p>
</div>
<div class="paragraph">
<p>Alternatively you can unmount a diskette from the DOSBox-X menu bar (when running in Windowed mode) by selecting "Drive", followed by the drive letter and "Unmount".</p>
</div>
</div>
<div class="sect2">
<h3 id="_boot_from_a_diskette_image">Boot from a diskette image</h3>
<div class="paragraph">
<p>You can either mount a disk image first and then boot from it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount a dos.ima
boot a:</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X supports the <code>-L</code> parameter for the <code>BOOT</code> command for backward compatibility with vanilla DOSBox, or other forks, but the parameter is not required with DOSBox-X to boot from a drive letter.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Or you can boot directly from a disk as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">boot dos.ima</span></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Multiple image files can be specified with either the <code>IMGMOUNT</code> or <code>BOOT</code> commands, in case you have a multi-disk install program.
Image files can be made read-only by prefixing the filename with a column character (<code>:</code>).
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
DOSBox-X will attempt to boot from a diskette, even if it is not bootable. This is needed to support early PC-Booter games.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Once a disk image is mounted, you can alternatively also boot from a disk image by selecting "Drive" from the menu bar, followed by the drive letter and "Boot from drive". You can also mount and boot a disk image in one step by selecting "Boot from disk image" from this submenu.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_diskette_images_in_linux">Using diskette images in Linux</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
You should never mount a disk image simultaneously in both DOSBox-X and in Linux, as that can cause corruption of files or the filesystem on the diskette image.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_gnome_disk_image_mounter">Gnome Disk Image Mounter</h4>
<div class="paragraph">
<p>When using the Gnome desktop environment, you can open <code>.IMG</code> disks with the "Disk Image Mounter". Simply right-click on the file, and select 'Open with Disk Image Mounter' and the file will be mounted READ-ONLY in the Gnome file manager.</p>
</div>
<div class="paragraph">
<p>The first time you want to open <code>.IMA</code> files, you need to right-click and choose "Open With Other Application", and then click on "View All Applications" and choose "Disk Image Mounter" from the list.
The next time you want to open a <code>.IMA</code> file, the option will be available directly from the right-click menu.</p>
</div>
<div class="paragraph">
<p>Disks can be unmounted from the Gnome file manager by clicking the unmount button next to the volume name.</p>
</div>
<div class="paragraph">
<p>Disk images can also be mounted READ-WRITE from the Linux Terminal using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">gnome-disk-image-mounter -w disk.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you run <code>gnome-disk-image-mounter</code> without arguments, it will ask you which disk image to mount, and give you the ability to mount it READ-WRITE.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mounting_a_diskette_image_from_the_linux_shell">Mounting a diskette image from the Linux shell</h4>
<div class="paragraph">
<p>The more traditional Linux method of mounting diskette image files from a Linux terminal.
This method requires <code>sudo</code> access.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">sudo mount -o loop,uid=$</span>UID disk.ima /mnt</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will cause <code>disk.ima</code> to be mounted under <code>/mnt</code> on the host.</p>
</div>
</div>
<div class="sect3">
<h4 id="_gnu_mtools">GNU mtools</h4>
<div class="paragraph">
<p>GNU mtools is an optional package you can install to interact with DOS disks or disk images.
It provides various commands which can be used to interact with DOS diskette images without having to mount them.</p>
</div>
<div class="paragraph">
<p>A subset of commands provided by mtools:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-left valign-top">DOS equivalent</th>
<th class="tableblock halign-left valign-top">Note</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mattrib</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">ATTRIB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">View and change file attributes</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mcopy</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">COPY / XCOPY</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Copy files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mdel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DEL / ERASE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete files</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mdeltree</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DELTREE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete directory tree</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mdir</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DIR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List directory contents</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mdu</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Disk Usage</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">minfo</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Info about the disk</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mlabel</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">LABEL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Label disk</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mmd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MD / MKDIR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Make directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mmove</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">MOVE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Move file or directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mrd</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RD / RMDIR</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mren</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">REN / RENAME</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Rename file or directory</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">mtype</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">TYPE</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Show contents of a file</p></td>
</tr>
</tbody>
</table>
<div class="sect4">
<h5 id="_list_contents_of_a_diskette_image">List contents of a diskette image</h5>
<div class="paragraph">
<p>This will list the contents of the root directory of the diskette image, similar to the DOS <code>DIR</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mdir -i disk.ima</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Assuming the diskette image has a directory named GAMES, the contents can be listed as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mdir -i disk.ima ::games</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_copy_file_into_a_diskette_image">Copy file into a diskette image</h5>
<div class="paragraph">
<p>This command will copy the file <code>hello.txt</code> into the root directory of the disk image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mcopy -i disk.ima hello.txt ::</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This command will copy the file <code>hello.txt</code> into the GAMES directory of the disk image.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mcopy -i disk.ima hello.txt ::games</span></code></pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_copy_files_out_of_a_diskette_image">Copy file(s) out of a diskette image</h5>
<div class="paragraph">
<p>This command will copy the file <code>hello.txt</code> out of the root of the diskette image, to the current directory (<code>.</code>)</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mcopy -i disk.ima ::hello.txt .</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you want to copy all files, including sub-directories, from the diskette image to the directory <code>tmp</code></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mkdir tmp
mcopy -s -i disk.ima :: tmp</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_diskette_images_in_windows">Using diskette images in Windows</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
You should never mount a disk image simultaneously in both DOSBox-X and in Windows, as that can cause corruption of files or the filesystem on the diskette image.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Windows 8 and newer has integrated support for mounting image files, and will offer the "Mount" option when you right-click a .IMG file.
Unfortunately this support is incompatible with the typical RAW MFM image files used by DOSBox-X, and the mount will fail.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Several 3rd party tools are available which can open the diskette image files:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.7-zip.org/">7-Zip</a></p>
</li>
<li>
<p><a href="https://www.winimage.com/winimage.htm">WinImage</a></p>
</li>
<li>
<p><a href="https://www.win-rar.com/">WinRAR</a></p>
</li>
<li>
<p><a href="https://www.winzip.com/">WinZIP</a></p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_using_diskette_images_in_macos">Using diskette images in macOS</h3>
<div class="paragraph">
<p>You can mount RAW MFM image files with the extension <code>.IMG</code> in macOS from the Finder by double-clicking on it.
You can unmount it by clicking on the "Eject" button next to it in the Finder.</p>
</div>
<div class="paragraph">
<p>It is also possible to mount the image file from the macOS Terminal using <code>hdiutil</code></p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_harddisk_images">Harddisk images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X supports mounting harddisk images in the following formats:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/IMG_(file_format)">RAW MFM sector image format</a> (typically <code>.img</code>)</p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Qcow">QCOW2</a> - QEMU copy-on-write v2 (<code>.qcow2</code>)</p>
<div class="ulist">
<ul>
<li>
<p>No support in DOSBox-X for QCOW2 zstd compression or encryption options</p>
</li>
</ul>
</div>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/VHD_(file_format)">Virtual Hard Disk</a> Volume (<code>.vhd</code>) (aka Virtual PC)</p>
</li>
<li>
<p>Bochs bximage (typically <code>.img</code>)</p>
</li>
<li>
<p>NEC PC-98 harddisk images (<code>.nhd</code> or <code>.hdi</code>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Creating and accessing harddisk images is very similar to diskette images, with the exception that they also contain partitions and they may contain other filesystems.</p>
</div>
<div class="sect2">
<h3 id="_creating_harddisk_images">Creating harddisk images</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
In addition to the below DOSBox-X command line utility, it is possible to create harddisk images at any time from the DOSBox-X menu.
Go to the "DOS" menu, and select "Create blank disk image…".
This option allows a few common HDD sizes to be created, for less common types you need to use the command line utility.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>DOSBox-X has a built-in <code>IMGMAKE</code> command with which you can create partitioned and FAT formatted harddisk images in either RAW MFM sector image or VHD format from the DOSBox-X command prompt.
<code>IMGMAKE</code> only creates a single primary DOS partition per harddisk image file.</p>
</div>
<div class="sect3">
<h4 id="_fat_version">FAT version</h4>
<div class="paragraph">
<p>The <code>IMGMAKE</code> command supports FAT12, FAT16 and FAT32 formatted partitions, and will try to automatically decide which type to use depending on the HDD capacity and the reported DOS version:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">HDD Capacity</th>
<th class="tableblock halign-left valign-top">Reported DOS version &lt; 7.1</th>
<th class="tableblock halign-left valign-top">Reported DOS version ≥ 7.1</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">≤ 12MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT12</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 12MB and &lt; 512MB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">≥ 512MB and ≤ 2GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">&gt; 2GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT32</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT32</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Using the <code>-FAT</code> option it is possible to overrule the decision process.
But this can cause <code>IMGMAKE</code> to give errors if the partition size is not supported by the filesystem type, or can cause other problems such as performance issues or waisted disk space.</p>
</div>
<div class="paragraph">
<p>e.g., to create a 400MiB HDD image formatted as FAT32:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd -size 400 -fat 32</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
FAT12 and FAT16 harddisk images will appear to have been partitioned and formatted by MS-DOS 5.0.
FAT32 harddisk images will appear to have been partitioned and formatted by Windows 98.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_using_templates">Using templates</h4>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd_520</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a 520MB partitioned and formatted harddisk image named hdd.img.</p>
</div>
<div class="paragraph">
<p>The image filename for this command is optional, and if you do not specify a filename, then the name <code>IMGMAKE.IMG</code> will be used, such as the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE -t hd_520</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The filename in this case is not limited to the DOS 8.3 filename length, but rather by your host filesystem. In DOSBox-X you can also specify the <code>-force</code> parameter to overwrite the file if it already exists.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can optionally attempt to force <code>IMGMAKE</code> to use a certain filesystem type with the <code>-fat</code> parameter.</p>
</div>
<div class="paragraph">
<p>You can optionally create a harddisk image that is not partitioned and formatted with:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd_520 -nofs</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X has no integrated FDISK and FORMAT commands, so creating harddisk images that are not partitioned and formatted is typically not recommended.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Supported harddisk sizes options using templates:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
<col style="width: 20%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Disk type</th>
<th class="tableblock halign-left valign-top">Capacity</th>
<th class="tableblock halign-left valign-top">CHS</th>
<th class="tableblock halign-left valign-top">IMGMAKE option</th>
<th class="tableblock halign-left valign-top">Filesystem</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seagate ST225</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">21MB (~ 20.23MB usable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">615,4,17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_st225</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Seagate ST251</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">41MB (~ 40.65MB usable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">820,6,17</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_st251</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">241MB (~ 240.39MB usable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">489,16,63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_250</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">504MB (~ 503.21MB usable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1023,16,63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_520</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2GB (~ 1.96GB usable)</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1023,64,63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_2gig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT16</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1023,130,63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_4gig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT32</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">8GB</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1023,255,63</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>-t hd_8gig</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FAT32</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_custom_size">Custom size</h4>
<div class="paragraph">
<p>Instead of using one of the templates, you can create a custom size harddisk up to 2TB using the <code>-size</code> option, or up to 8GB using the <code>-chs</code> geometry option.</p>
</div>
<div class="paragraph">
<p>To create a partitioned and FAT16 formatted 31MB HDD image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd -size 31</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The same can be accomplished with the CHS (Cylinders, Heads, Sectors) geometry:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd -chs 992,2,32</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The maximum allowed CHS value is 1023,255,63 which will create a 8GB HDD image.</p>
</div>
<div class="paragraph">
<p>You can optionally create a harddisk image that is not partitioned and formatted by specifying <code>-nofs</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd -size 31 -nofs</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X has no integrated FDISK and FORMAT commands, so creating harddisk images that are not partitioned and formatted is typically not recommended.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>IMGMAKE</code> command also has an optional ''-bat'' option for use on Windows systems.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE hdd.img -t hd -size 31 -nofs -bat</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Will cause both a hdd.img and a hdd.bat to be generated.
The BAT file will contain the imgmount command to mount the harddisk image, including geometry.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_creating_harddisk_images_from_folder_mounts">Creating harddisk images from folder mounts</h3>
<div class="paragraph">
<p>Starting with DOSBox-X 2022.08.0 it is possible to convert a host folder mount to a harddisk image file.</p>
</div>
<div class="paragraph">
<p>The steps are simply to first <code>mount</code> a host folder, and then from the menus (when running in Windowed mode), select "Drive" &gt; "drive letter" &gt; "Save to disk image".</p>
</div>
<div class="paragraph">
<p>The FAT version will be automatically selected, based on the aggregate amount of files in the folder, plus (by default) 250MiB of free space.
If the total does not exceed 2GiB, it will be converted to a FAT16 harddisk image file, otherwise it will become a FAT32 image instead (which will require a guest OS with FAT32 support).</p>
</div>
<div class="paragraph">
<p>The amount of free space can be adjusted in the DOSBox-X config file as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="ini"><span class="nn">[sdl]</span>
<span class="err">convert</span> <span class="err">fat</span> <span class="err">free</span> <span class="py">space</span> <span class="p">=</span> <span class="s">10</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will limit the free space to 10MiB.
Set it to 0 for read-only (no free space) and -1 to attempt to use the actual free space on the host drive (subject to FAT filesystem limits).</p>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_harddisk_images">Mounting harddisk images</h3>
<div class="paragraph">
<p>Mounting a harddisk image in DOSBox-X is typically as simple as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount c hdd.img</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount C: hdd.img
imgmount C: hdd.img -t hdd
imgmount C: hdd.img -t hdd -fs fat</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>If you do not specify an image filename, it will try to open a file named <code>IMGMAKE.IMG</code>, such as in this example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount c</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>-t hdd</code> option is only needed with DOSBox-X when mounting a harddisk image on the emulated <code>A:</code> or <code>B:</code> drive, as those are normally reserved for diskettes.
Or when mounting a harddisk image that is not partitioned or formatted, or formatted with an unsupported filesystem in combination with the <code>-size</code> parameter.
The <code>-fs fat</code> option should not be needed as the FAT12, FAT16 or FAT32 filesystem types will be automatically detected.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
As of DOSBox-X 2023-10-06, you can specify a wildcard instead of a drive letter (e.g., <code>imgmount *: hdd.img</code>). This will cause DOSBox-X to take the next available drive letter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a harddisk image has either a "FAT16 LBA" or "FAT32" partition, the mount will fail unless a higher than default reported DOS version is set.
Those partition types are normally restricted to, respectively, MS-DOS 7.0 (Windows 95) or MS-DOS 7.1 (Windows 95 OSR2/Windows 98) or later, and therefore DOSBox-X does not allow them to be mounted with the default DOS 5.0 version that DOSBox-X reports.
You can change the reported DOS version in your DOSBox-X config file by for instance setting <code>ver=7.1</code> in the <code>[dos]</code> section. Or alternatively from the DOSBox-X DOS prompt by typing for instance <code>ver set 7.1</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If a harddisk image has multiple partitions, by default only the first primary partition will be mounted and accessible from the DOSBox-X integrated DOS.
You can optionally mount a different partition, but only one partition at a time can be mounted and be accessible from the integrated DOS.
When booting real DOS in DOSBox-X, all partitions will be accessible.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Starting with DOSBox-X 2023-05-01, if a harddisk image is 2GiB or larger, LBA size detection will be attempted.
Smaller images will default to CHS detection. You can optionally add <code>-lba</code> or <code>-chs</code> to the <code>imgmount</code> command to force LBA or CHS detection.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>A harddisk image that is partitioned, but not formatted, or has an unsupported filesystem can be mounted as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 2 hdd.img</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is required to use a device number instead of a drive letter in this case.
DOSBox-X automatically assumes the <code>-fs none</code> flag when a drive number is used, but this flag is required for vanilla DOSBox or other DOSBox forks.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Device number</th>
<th class="tableblock halign-left valign-top">Controller option</th>
<th class="tableblock halign-left valign-top">IDE Controller</th>
<th class="tableblock halign-left valign-top">Master/Slave</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">2</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-ide 1m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">3</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-ide 1s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Primary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slave</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-ide 2m</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Master</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">5</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-ide 2s</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Secondary</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slave</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>A harddisk image that is not yet partitioned needs additional parameters, such as a template or the size in SHC geometry.</p>
</div>
<div class="paragraph">
<p>Using the original template it was based on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 2 hdd.img -t hd_4gig</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or using the original SHC geometry it was based on:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 2 hdd.img -t hdd -size 512,32,2,992</span></code></pre>
</div>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<div class="title">Important</div>
</td>
<td class="content">
The order of the geometry values for the <code>IMGMOUNT</code> command are reversed compared to <code>IMGMAKE</code>.
So instead of specifying the size in CHS order, it needs to be specified in SHC (Sectors, Heads, Cylinders) order.
In addition, it needs to be prefixed with the bytes-per-sector, which should always be 512 for now.
So a CHS of 992,2,32 becomes <code>-size 512,32,2,992</code>.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_mounting_from_the_drive_menu_2">Mounting from the Drive menu</h4>
<div class="paragraph">
<p>To access it, DOSBox-X needs to be in windowed mode, there is a menu bar with a "Drive" drop-down. Select a drive letter, and you will see various mount options.</p>
</div>
<div class="paragraph">
<p>The only mount option that can be used for image files is the "Mount disk image" option.
All the other mount options are host folder mounts.</p>
</div>
<div class="paragraph">
<p>Select the Drive menu, and for instance the "C" drive and "Mount disk image", now a file browser will allow you to select an image file.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
It is recommended to only mount harddisk images when at the integrated DOSBox-X DOS prompt.
Doing so when running a program, real DOS or Win9x is strongly discouraged as it can lead to data corruption and/or crashes.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_specifying_the_partition_to_mount">Specifying the partition to mount</h3>
<div class="paragraph">
<p>If the harddisk image contains multiple partitions, by default DOSBox-X will only mount the first primary partition.</p>
</div>
<div class="paragraph">
<p>You can optionally specify the <code>-o partidx=</code> parameter, where you can specify the partition number you want to mount.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>-1 means autodetect (default)</p>
</li>
<li>
<p>0 is the 1st primary partition</p>
</li>
<li>
<p>1 is the 2nd primary partition</p>
</li>
<li>
<p>2 is the 3rd primary partition</p>
</li>
<li>
<p>3 is the 4th primary partition or the Extended partition</p>
</li>
<li>
<p>4 is the 1st logical partition</p>
</li>
<li>
<p>5 is the 2nd logical partition</p>
</li>
<li>
<p>6 is the 3rd logical partition</p>
</li>
<li>
<p>7 is the 4th logical partition</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>e.g. to mount the 2nd primary partition:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount C: hdd.img -o partidx=1</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X only allows one partition per harddisk image to be mounted in the integrated DOS. When booting real DOS, all partitions will be available.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the harddisk image has an Extended partition, that partition cannot be mounted, but the logical partitions it contains can.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_unmounting_harddisk_images">Unmounting harddisk images</h3>
<div class="paragraph">
<p>Harddisk images can be unmounted using the <code>-u</code> flag. e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount c -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also unmount using the <code>MOUNT</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mount c -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to unmount the currently mounted image (if any), and mount a new image in one step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount c hdd2.img -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will cause the currently mounted harddisk image (if any) to be unmounted, and <code>hdd2.img</code> to be mounted instead.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Alternatively you can unmount a harddisk image from the DOSBox-X menu bar by selecting "Drive", followed by the drive letter and "Unmount".
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
It is recommended to only unmount harddisk images when at the integrated DOSBox-X DOS prompt.
Doing so when running a program, real DOS or Win9x is strongly discouraged as it can lead to data corruption and/or crashes.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_booting_from_a_harddisk_image">Booting from a harddisk image</h3>
<div class="paragraph">
<p>First mount the harddisk image, and then boot from it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount c hdd.img
boot c:</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X supports the <code>-L</code> parameter for the <code>BOOT</code> command for backward compatibility with vanilla DOSBox, or other forks, but the parameter is not required with DOSBox-X to boot from a drive letter.
</td>
</tr>
</table>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Once a disk image is mounted, you can alternatively also boot from a disk image by selecting "Drive" from the menu bar (when in windowed mode), followed by the drive letter and "Boot from drive".
You can also mount and boot a disk image in one step by selecting "Boot from disk image" from this submenu.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_harddisk_images_in_linux">Using harddisk images in Linux</h3>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<div class="title">Warning</div>
</td>
<td class="content">
You should never mount a harddisk image simultaneously in both DOSBox-X and in Linux, as that can cause corruption of files or the filesystem on the disk image.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_gnome_disk_image_mounter_2">Gnome Disk Image Mounter</h4>
<div class="paragraph">
<p>When using the Gnome desktop environment, you can open <code>.IMG</code> disks with the "Disk Image Mounter".
Simply right-click on the file, and select 'Open with Disk Image Mounter' and the file will be mounted READ-ONLY in the Gnome file manager.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the harddisk image contains multiple partitions, they will ALL be mounted.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Disks can be unmounted from the Gnome file manager by clicking the unmount button next to the volume name.</p>
</div>
<div class="paragraph">
<p>Disk images can also be mounted READ-WRITE from the Linux Terminal using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">gnome-disk-image-mounter -w hdd.img</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or if you run <code>gnome-disk-image-mounter</code> without arguments, it will ask you which disk image to mount, and give you the ability to mount it READ-WRITE.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mounting_a_harddisk_image_from_the_linux_shell">Mounting a harddisk image from the Linux shell</h4>
<div class="paragraph">
<p>The more traditional Linux method of mounting harddisk image files from a Linux terminal. This method requires <code>sudo</code> access.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="gp">sudo mount -o loop,offset=32256,uid=$</span>UID hdd.img /mnt</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will cause <code>hdd.img</code> to be mounted under <code>/mnt</code> on the host.</p>
</div>
<div class="paragraph">
<p>The offset is required to skip the Master Boot Record (MBR) and partition data at the beginning of the harddisk image.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
This command will mount the first partition only.
If the harddisk image contains multiple partitions, you can find the offset for the other partitions by running on the host <code>fdisk -l hdd.img</code> and looking for the "Start" of the partition, and multiply the value by 512.
For the first partition this should normally always start at 63*512=32256
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_harddisk_images_in_windows">Using harddisk images in Windows</h3>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Windows 8 and newer has integrated support for mounting image files, and will offer the "Mount" option when you right-click a <code>.IMG</code> file.
Unfortunately this support is incompatible with the typical RAW MFM image files used by DOSBox-X, and the mount will fail.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>One tool which is able to open harddisk images is 7-Zip, but only in read-only mode.</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_harddisk_images_in_macos">Using harddisk images in macOS</h3>
<div class="paragraph">
<p>You can mount RAW MFM harddisk image files with the extension <code>.IMG</code> in macOS from the Finder by double-clicking on it.
You can unmount it by clicking on the "Eject" button next to it in the Finder.</p>
</div>
<div class="paragraph">
<p>RAW MFM Harddisk images can also be opened in macOS from the Terminal using <code>hdiutil</code> as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">hdiutil attach hdd.img
/dev/disk6              FDisk_partition_scheme
/dev/disk6a1            DOS_FAT_16</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The output will tell you where the disk is attached.
In the above example the disk is mounted on <code>/dev/disk6</code>, and the first partition as <code>/dev/disk6a1</code>.</p>
</div>
<div class="paragraph">
<p>After this the harddisk image should be available from both the terminal and from Finder.
Once you&#8217;re done, you can detach it as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">hdiutil detach /dev/disk6
"disk6" ejected.</span></code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_cd_rom_or_dvd_images">CD-ROM or DVD images</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSbox-X supports CD-ROM or DVD image files with the ISO-9660 (or High-Sierra) filesystem in <code>.ISO</code>, <code>.CUE</code>+<code>.BIN</code>, <code>.MDF</code> or <code>.CHD</code> image format.</p>
</div>
<div class="paragraph">
<p>By default, ISO-9660 Level 1 is used, which is limited to traditional DOS 8.3 character filenames.
When emulating DOS version 7.0 or later (or <code>lfn=true</code> is set in the DOSBox-X config file), ISO-9660 Level 2 is supported with up to 31 character filenames.</p>
</div>
<div class="paragraph">
<p>Starting with DOSBox-X 2022.08.0 there is also support for:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Rock Ridge extensions to ISO-9660, allowing up to 255 character mixed-case file names with Unicode (typically used by Unix or Unix-like systems, such as Linux)</p>
</li>
<li>
<p>Joliet extensions to ISO-9660, allowing up to 64 character mixed-case file names with Unicode (introduced for Windows 95)</p>
</li>
<li>
<p>UDF filesystem, more commonly used for DVD media (introduced for Windows 98)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>.ISO</code> is the easiest format to work with, as long as there is only a single data track on the CD or DVD.
If the CD or DVD contains multiple tracks, like DATA and AUDIO (aka redbook audio) the use of <code>.CUE</code>+<code>.BIN</code>, <code>.MDF</code> or <code>.CHD</code> is required.</p>
</div>
<div class="sect2">
<h3 id="_copy_protected_media">Copy protected media</h3>
<div class="paragraph">
<p>DOSBox-X has limited support for copy protected CD-ROMs.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>In DOSBox-X 2022.08.00 the IDE emulation was enhanced such that <a href="https://en.wikipedia.org/wiki/SafeDisc">SafeDisc</a> V1 games should work</p>
</li>
<li>
<p>In DOSBox-X 2022.09.00 another minor change was introduced to solve one of the issues with SafeDisc V2</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you run into issues with copy protected media, look for "cracks" for the game to bypass the copy protection.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_cd_or_dvd_images">Mounting CD or DVD images</h3>
<div class="paragraph">
<p>Mounting a CD or DVD image in DOSBox-X is typically as simple as</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount d cdrom.iso</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This is equivalent to</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount D: cdrom.iso
imgmount D: cdrom.iso -t iso
imgmount D: cdrom.iso -t cdrom</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The <code>-t iso</code> or <code>-t cdrom</code> parameter is only needed with DOSBox-X when the extension is not <code>.ISO</code>, <code>.CUE</code>, <code>.MDF</code> or <code>.CHD</code>.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If the names of your CD/DVD images contain characters of foreign languages such as Japanese, please make sure that the current DOS code page matches the language you use before mounting the images. If you decide to put such commands in the [autoexec] section of the config file, please also make sure the encoding of your config file matches your language when you save the config file.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_rock_ridge_joliet_and_udf">Rock Ridge, Joliet and UDF</h3>
<div class="paragraph">
<p>Starting with DOSBox-X 2022.08.0, there is support for the Rock Ridge and Joliet extensions (for long filenames) to the ISO-9660 filesystem, in addition to support for the UDF filesystem.</p>
</div>
<div class="paragraph">
<p>Support for Rock Ridge and Joliet is automatically enabled when emulating DOS 7.0 or later. Support for UDF is enabled when emulating DOS 7.1 or later. Alternatively, Rock Ridge and Joliet support is also enabled when the <code>lfn=true</code> setting is set in the DOSBox-X config file.</p>
</div>
<div class="paragraph">
<p>If DOSBox-X detects a CD image with both Rock Ridge and Joliet extensions, it will only use the Joliet extensions.</p>
</div>
<div class="paragraph">
<p>Rock Ridge, Joliet or UDF support can be enabled or disabled when mounting a CD image with the <code>-o [rr|joliet|udf]</code> image mount option.</p>
</div>
<div class="paragraph">
<p>e.g. to mount a CD image and disable Rock Ridge support:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount D: cdrom.iso -o rr=0</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_an_empty_cd_rom_drive">Mounting an empty CD-ROM drive</h3>
<div class="paragraph">
<p>Starting with DOSBox-X 2024.03.01 it is possible to mount an empty CD-ROM drive.
This is useful for when you intend to boot a guest OS, and want to be able to insert a CD-ROM in the drive after booting using the DOSBox-X drop-down menu&#8217;s.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount e -t iso -empty</span></code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_accessing_a_cd_or_dvd_in_real_dos">Accessing a CD or DVD in real DOS</h3>
<div class="paragraph">
<p>With the integrated DOS that DOSBox-X provides, you do not need to worry about loading a CD-ROM driver and MSCDEX.
If however, you boot real DOS in DOSBox-X, any mounted CD-ROM images will not be accessible until you load both an IDE CD-ROM driver and MSCDEX.</p>
</div>
<div class="paragraph">
<p>For an IDE CD-ROM driver we recommend either <code>OAKCDROM.SYS</code>, <code>UIDE.SYS</code> or <code>VIDE-CDD.SYS</code>.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OAK stands for OEM Adaptation Kit, and this is the IDE CD-ROM driver shipped on the Windows 95, 98 and ME boot disks.</p>
</li>
<li>
<p><a href="https://www.ibiblio.org/pub/micro/pc-stuff/freedos/files/dos/cdrom/uide/">UIDE.SYS</a> is available from <a href="https://www.freedos.org/">FreeDOS</a>. Note that this driver is know to have issues in some cases, such as with mixed media (data+audio)</p>
</li>
<li>
<p>You can also use the <a href="https://vogonsdrivers.com/getfile.php?fileid=1456&amp;menustate=0">Acer VIDE-CDD.SYS</a> driver which loads faster than OAKCDROM.SYS.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><code>MSCDEX.EXE</code> is included with MS-DOS 6.x and included on the Windows 95, 98 or ME boot disks, or you can use the <a href="http://adoxa.altervista.org/shsucdx/index.html">SHSUCDX.EXE</a> redirector available from FreeDOS.</p>
</div>
<div class="paragraph">
<p>Edit the config.sys file and add the following line to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">device</span><span class="o">=</span>c:<span class="se">\d</span>os<span class="se">\o</span>akcdrom.sys /D:cdrom001</code></pre>
</div>
</div>
<div class="paragraph">
<p>Edit the autoexec.bat file and add the following line to it:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="shell"><span class="nv">device</span><span class="o">=</span>c:<span class="se">\d</span>os<span class="se">\m</span>scdex.exe /D:cdrom001 /L:D</code></pre>
</div>
</div>
<div class="paragraph">
<p>The above assumes <code>oakcdrom.sys</code> and <code>mscdex.exe</code> are in the <code>C:\DOS</code> directory in the harddisk image file.
You can substitute <code>oakcdrom.sys</code> and <code>mscdex.exe</code> with their FreeDOS equivalents with the same parameters.</p>
</div>
<div class="paragraph">
<p>The <code>/L:D</code> option will cause MSCDEX to use the D: drive letter for the CD-ROM, adjust as needed.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_multiple_cd_or_dvd_images">Mounting multiple CD or DVD images</h3>
<div class="paragraph">
<p>Some DOS programs or games came on multiple CD or DVDs, for this purpose it is possible to mount multiple images on one drive letter and swap between them.
e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount d cdrom1.iso cdrom2.iso cdrom3.iso</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>In this example <code>cdrom1.iso</code> will be immediately usable on D: but <code>cdrom2.iso</code> will require a disc-swap action.</p>
</div>
<div class="paragraph">
<p>Disk-swap can be done using either a hot-key combination, or using the menu bar.
The hot-key for Windows is F11+CTRL+C and for other platforms F12+CTRL+C.
Or from the menu you can select "DOS" followed by "Swap CD".
Lastly, you can use the <code>IMGSWAP</code> command to swap between images.</p>
</div>
<div class="paragraph">
<p>If you lose track of which disc is currently active, open the 'Drive' menu option, select the drive letter and select 'Drive Information'.
This information can also be retrieved from the <code>IMGSWAP</code> command.</p>
</div>
</div>
<div class="sect2">
<h3 id="_mounting_from_the_drive_menu_3">Mounting from the Drive menu</h3>
<div class="paragraph">
<p>The advantage of this option is, that you don&#8217;t need to mount all the CD or DVDs before starting your program or game, but you can mount CD or DVD images when needed.</p>
</div>
<div class="paragraph">
<p>To access it, DOSBox-X needs to be in windowed mode, there is a menu bar with a "Drive" drop-down. Select a drive letter, and you will see various mount options.</p>
</div>
<div class="paragraph">
<p>The only mount option that can be used for image files is the "Mount disk image" option.
All the other mount options are host folder mounts.</p>
</div>
<div class="paragraph">
<p>Select the Drive menu, and a suitable drive letter, and "Mount disk image". Now a file browser will allow you to select an image file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_unmounting_cd_or_dvd_images">Unmounting CD or DVD images</h3>
<div class="paragraph">
<p>CD or DVD images can be unmounted using the <code>-u</code> flag. e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount d -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also unmount using the <code>MOUNT</code> command.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">mount d -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>It is also possible to unmount the currently mounted image (if any), and mount a new image in one step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount d cdrom2.iso -u</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will cause the currently mounted image file (if any) to be unmounted, and <code>cdrom2.iso</code> to be mounted instead.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<div class="title">Tip</div>
</td>
<td class="content">
Alternatively you can unmount an image from the DOSBox-X menu bar (when in windowed mode) by selecting "Drive", followed by the drive letter and "Unmount".
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_boot_from_a_cd_or_dvd_image">Boot from a CD or DVD image</h3>
<div class="paragraph">
<p>DOSBox-X has limited support for booting from a CD or DVD.
Only those that use the El Torito emulated diskette method are supported, such as the Windows 98 or Windows ME full-OEM editions.</p>
</div>
<div class="paragraph">
<p>You first need to mount the CD-ROM, then mount the diskette image, located on the CD-ROM, and finally you can boot from the A: drive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount d Win98.iso
imgmount a -bootcd d
boot A:</span></code></pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
The second command is equivalent to <code>imgmount a -el-torito d</code> or <code>imgmount a -el-torito d -t floppy</code>. If this command gives the error "<strong>El Torito CD-ROM boot record not found</strong>", the CD-ROM is either not bootable or uses an unsupported boot method.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
DOSBox-X supports the <code>-L</code> parameter for the <code>BOOT</code> command for backward compatibility with vanilla DOSBox, or other forks, but the parameter is not required with DOSBox-X to boot from a drive letter.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_using_cd_or_dvd_images_in_linux">Using CD or DVD images in Linux</h3>
<div class="paragraph">
<p><code>.ISO</code> images are fully supported by standard Linux tools, but <code>.CUE</code>+<code>.BIN</code>, <code>.MDF</code> and <code>.CHD</code> are not.</p>
</div>
<div class="sect3">
<h4 id="_gnome_disk_image_mounter_3">Gnome Disk Image Mounter</h4>
<div class="paragraph">
<p>If you&#8217;re using the Gnome desktop environment, you can open <code>.ISO</code> disks with the "Disk Image Mounter". Simply right-click on the file, and select 'Open with Disk Image Mounter' and the file will be mounted in the Gnome file manager.
This method will not work for <code>.CUE</code>+<code>.BIN</code>, <code>.MDF</code> or <code>.CHD</code> files.</p>
</div>
<div class="paragraph">
<p>Disks can be unmounted from the Gnome file manager by clicking the unmount button next to the volume name.</p>
</div>
<div class="paragraph">
<p><code>.ISO</code> images can also be mounted from the Linux Terminal using:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">gnome-disk-image-mounter cdrom.iso</span></code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_cdemu">CDEmu</h4>
<div class="paragraph">
<p><a href="https://cdemu.sourceforge.io/">CDEmu</a> is a CD-ROM emulator for Linux. It supports numerous image formats, including <code>.ISO</code>, <code>.CUE</code>+<code>.BIN</code> and <code>.MDF</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_mounting_a_iso_image_from_the_linux_shell">Mounting a ISO image from the Linux shell</h4>
<div class="paragraph">
<p>The more traditional Linux method of mounting diskette image files from a Linux terminal.
This method will not work for <code>.CUE</code>+<code>.BIN</code>, <code>.MDF</code> or <code>.CHD</code> files.
This method requires <code>sudo</code> access.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">sudo mount -o loop cdrom.iso /mnt</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will cause <code>cdrom.iso</code> to be mounted under <code>/mnt</code> on the host.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_using_cd_or_dvd_images_in_windows">Using CD or DVD images in Windows</h3>
<div class="paragraph">
<p>Windows 8 and later has integrated support for mounting ISO files. Simply right-click a ISO file and select "Mount".</p>
</div>
<div class="paragraph">
<p>Alternatively there is <a href="https://wincdemu.sysprogs.org/">WinCDEmu</a> which can mount amongst others ISO, CUE+BIN and MDF images.</p>
</div>
<div class="paragraph">
<p>Programs like 7-Zip, WinRAR and WinZIP can also extract the contents of a ISO file</p>
</div>
</div>
<div class="sect2">
<h3 id="_using_cd_or_dvd_images_in_macos">Using CD or DVD images in macOS</h3>
<div class="paragraph">
<p>You can mount ISO image files with the extension <code>.ISO</code> in macOS from the Finder by double-clicking on it.
You can unmount it by clicking on the "Eject" button next to it in the Finder.</p>
</div>
<div class="paragraph">
<p>ISO images can also be opened in macOS from the Terminal using <code>hdiutil</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_copying_files_into_or_out_of_image_files_from_dosbox_x">Copying files into or out of image files from DOSBox-X</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need to copy files into, or out of an image file, this can be done from the DOSBox-X integrated DOS.</p>
</div>
<div class="paragraph">
<p>Obviously, copying files to write-protected media is not possible. As such you cannot copy files to a CD or DVD image, or to write-protected diskette images.</p>
</div>
<div class="paragraph">
<p>The general steps are as follows:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Start DOSBox-X</p>
</li>
<li>
<p><code>imgmount</code> the image file in DOSBox-X that you want to copy files into or out of</p>
</li>
<li>
<p><code>mount</code> a host directory or drive</p>
</li>
<li>
<p>Copy the files using the <code>copy</code> or <code>xcopy</code> commands</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>Example of extracting the contents of a CD-ROM image file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT d cdrom.iso
MOUNT C .
MKDIR C:\CDROM
XCOPY D: C:\CDROM /I /S</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a new "CDROM" directory on the host system with the contents of the cdrom.iso file.</p>
</div>
<div class="paragraph">
<p>Example of copying a file into a harddisk image file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT C hdd.img
MOUNT D .
COPY D:\UNZIP.EXE C:\DOS</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This copies the file <code>UNZIP.EXE</code> from the host system to the <code>C:\DOS</code> directory in the harddisk image file.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_creating_a_ram_drive">Creating a RAM drive</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you need a temporary drive, creating a RAM drive is as simple as running</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMOUNT e -t ram -size 20000</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>This will create a temporary RAM drive as drive <code>E:</code> with a size of 20MB.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
The contents of the RAM drive will be lost if the drive is unmounted, a program or yourself issues a reset in DOSBox-X or DOSBox-X is shut-down. They do however survive booting into real DOS.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Unlike traditional DOS RAM disk programs (e.g. <code>VDISK</code>, <code>RAMDRIVE</code>) this RAM drive will not use any memory allocated for use inside DOSBox-X itself.
In other words, it will have no effect on available memory for DOS programs.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_qcow2_support">QCOW2 support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X provides limited support for QCOW2 disk images.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>There is no support for creating QCOW2 images in DOSBox-X</p>
</li>
<li>
<p>There is no support for the newer zstd compression or encryption options</p>
</li>
<li>
<p>Copy-On-Write support needs to be handled manually, outside DOSBox-X</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A QCOW2 image can be created with <a href="https://www.qemu.org/download/">qemu-img</a> as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">qemu-img create -f qcow2 -o compat=0.10 hdd.qcow2 2G</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above command will create a 2GiB QCOW2 file named <code>hdd.qcow2</code>. Due to zlib compression the disk image will be significantly smaller and grow with usage.</p>
</div>
<div class="paragraph">
<p>Mounting an empty qcow2 image file can be accomplished in DOSBox-X as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 2 hdd.qcow2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>At this point, the image file will have to be partitioned or formatted, which can be done by booting from a DOS floppy disk:</p>
</div>
<div class="paragraph">
<p>Once a qcow2 image file has been partitioned and formatted, it can be mounted on a drive-letter as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount C hdd.qcow2</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The advantage of the QCOW2 format, is the Copy-On-Write (COW) functionality which allows you to create a base image of for instance Windows 98, and then have different snapshots on top of that with different drivers or applications.
This saves disk space compared to maintaining multiple full installations, and can prevent Windows bit-rot.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_vhd_support">VHD support</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X provides support for VHD (aka Virtual PC) disk images. This supports was enhanced in DOSBox-X 2023.09.01.</p>
</div>
<div class="paragraph">
<p>There are various ways to create VHD images. Either external tools can be used, or the integrated <code>IMGMAKE</code> utility can be used.</p>
</div>
<div class="paragraph">
<p>For example to create a 2GiB dynamic VHD image using the integrated <code>IMGMAKE</code> utility:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmake hdd.vhd -t vhd -size 2048</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Or to create a 2GiB fixed-size VHD image using the integrated 'IMGMAKE' utility:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmake hdd.vhd -t hd -size 2048</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The advantage of using <code>IMGMAKE</code> is that the created image file will be partitioned and formatted and as such is ready to be mounted.</p>
</div>
<div class="paragraph">
<p>Alternatively, external tools such as <a href="https://www.qemu.org/download/">qemu-img</a> can be used to create VHD files, with the disadvantage that they may not be partitioned and formatted.</p>
</div>
<div class="paragraph">
<p>If you have a VHD image file that is not partitioned or formatted, it will have to be mounted on a drive-number, after which you can boot from a DOS floppy disk to partition and format the image:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount 2 hdd.vhd</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a VHD image file has been partitioned and formatted, it can be mounted on a drive-letter as such:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">imgmount C hdd.vhd</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_archiving_diskettes">Archiving diskettes</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you have 3.5" or 5.25" diskettes that you want to convert to image files, there are a multitude of ways to accomplish this, and really out of the scope for this Guide.</p>
</div>
<div class="paragraph">
<p>Some potential useful links:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://www.archiveteam.org/index.php?title=Rescuing_Floppy_Disks">Rescuing Floppy Disks</a></p>
</li>
<li>
<p><a href="https://diskpreservation.com/">Floppy Disk Preservation</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>If you have a relatively modern PC running Windows with a floppy drive, the <code>IMGMAKE</code> command supports converting a diskette to an image file.
This will even work with USB diskette drives.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="console"><span class="go">IMGMAKE disk.ima -source a -r 3</span></code></pre>
</div>
</div>
<div class="paragraph">
<p>The above will try to read the real A: drive on your Windows PC, and convert it to a disk image named <code>disk.ima</code>. The <code>-r</code> option specifies how many retries are allowed while reading the original diskette.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<div class="title">Caution</div>
</td>
<td class="content">
Do not buy "modern" USB 3.5" floppy drives available from retailers like Amazon.
The drive mechanisms are junk and have a high likelihood of damaging your disk.
Instead, look for an older second-hand USB floppy drive from a known brand like Dell, HP, IBM, Lenovo, Sony, Teac or Toshiba.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_fdisk">FDISK</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X does not supply the FDISK utility to partition harddisks. Instead it supplies an <code>IMGMAKE</code> utility which can be used to create HDD image files, including paritioning and formatting them.</p>
</div>
<div class="paragraph">
<p>If however you really want to run the DOS FDISK utility from the DOSBox-X integrated emulated DOS, it is possible as of DOSBox-X 2023.10.06.</p>
</div>
<div class="paragraph">
<p>First create a blank HDD image file:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Z:\&gt;IMGMAKE hdd.img -t hd -nofs -size 100
Creating image file "hdd.img" with 812 cylinders, 4 heads and 63 sectors</pre>
</div>
</div>
<div class="paragraph">
<p>Then attach the blank image using the CHS geometry. '2' is a drive number that refers to the first HDD.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>Z:\&gt;IMGMOUNT 2 hdd.img -size 512,63,4,812
Drive number 2 mounted as hdd.img</pre>
</div>
</div>
<div class="paragraph">
<p>Now running <code>FDISK</code> from MS-DOS or PC DOS should work, and allow partitions to be created or deleted.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
If FDISK return an error "Incorrect DOS version", you must set the DOSBox-X reported DOS version to match the DOS version that FDISK came from.
e.g., if FDISK.EXE came from MS-DOS 6.22, first run <code>VER SET 6.22</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_format">FORMAT</h2>
<div class="sectionbody">
<div class="paragraph">
<p>DOSBox-X does not supply the FORMAT utility to format floppies or harddisks. Instead it supplies an <code>IMGMAKE</code> utility which can be used to create Floppy or HDD image files, including formatting them.</p>
</div>
<div class="paragraph">
<p>If however you really want to run the DOS FORMAT utility from the DOSBox-X integrated emulated DOS, it is partly possible as of DOSBox-X 2023.10.06.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
A harddisk image MUST be partitioned before it can be formatted.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
Formatting an unformatted floppy disk image is not possible at this time using this method. But it is possible to format a floppy disk that is already formatted.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
It is important to mount the image file on a <strong>drive letter</strong>, as <code>FORMAT</code> cannot deal with drive numbers.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>In case of a harddisk, first follow the steps in the FDISK section above to create the image file and partition it.</p>
</div>
<div class="paragraph">
<p>Then attach the image using <code>IMGMOUNT</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
For harddisk images, once the image is partitioned it is no longer necessary to specify the geometry.
</td>
</tr>
</table>
</div>
<div class="literalblock">
<div class="content">
<pre>Z:\&gt;IMGMOUNT c hdd.img
Image geometry auto detection: -size 512,63,4,812
Drive C is mounted as hdd.img
Drive not formatted. Format it before accessing the drive.</pre>
</div>
</div>
<div class="paragraph">
<p>Once the image file is mounted on a drive letter, running <code>FORMAT</code> from MS-DOS or PC DOS should work.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">
the '/s' option to transfer system files does not work properly at this time.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_known_limitations">Known limitations</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When booting a Guest OS (DOS or Win9x) in DOSBox-X all the Drive options will become unavailable (greyed out).
This is because, once you boot a guest OS, the drive letter mapping loses its meaning as the guest OS is responsible for drive letter assignment.</p>
</div>
<div class="paragraph">
<p>The only mapping that DOSBox-X still has at that point, is that of drive numbers to the image file.</p>
</div>
<div class="paragraph">
<p>There is limited support for changing the loaded Floppy or CD image from the DOS menu where you will find the options "Change current floppy image&#8230;&#8203;" and "Change current CD image&#8230;&#8203;".</p>
</div>
<div class="paragraph">
<p>If multiple floppy or CD-ROM images are mounted, you will be asked for each mounted image if you want to change it.</p>
</div>
<div class="paragraph">
<p>Some limitations of this support:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Requires either an image to be mounted before you boot a Guest OS, or an empty drive to be emulated. Otherwise, you will get an error such as "No floppy drive is currently available".</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_outstanding_issues_with_this_page">Outstanding issues with this page</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Mention Bochs bximage support in more detail. Does it support flat, sparse, growing formats?</p>
</li>
<li>
<p>How about IDE tertiary through octernary controllers in dosbox-x config. Do the device number and/or -ide options continue counting up to device number 18 and <code>-ide 8s</code>?</p>
</li>
<li>
<p>PC-98 descriptions need checking as I have no experience with them.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<script src="./docinfo/copy-to-clipboard.js"></script>
</body>
</html>