<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.21">
<title>PC-98 emulation in DOSBox-X</title>
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700">
<link rel="stylesheet" href="./asciidoctor.css">
<link rel="stylesheet" href="./rouge-github.css">
<link rel="stylesheet" href="./docinfo/copy-to-clipboard.css">
</head>
<body class="article">
<div id="header">
</div>
<div id="content">
<div class="paragraph">
<p>Back to the <a href="Home">DOSBox-X Wiki Welcome page</a>.</p>
</div>
<div class="sect1">
<h2 id="_pc_98_emulation_in_dosbox_x">PC-98 emulation in DOSBox-X</h2>
<div class="sectionbody">
<div id="toc" class="toc">
<div id="toctitle" class="title">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_pc_98_emulation_in_dosbox_x">PC-98 emulation in DOSBox-X</a>
<ul class="sectlevel2">
<li><a href="#_start_pc_98_emulation">Start PC-98 emulation</a></li>
<li><a href="#_pc_98_font_rom">PC-98 font ROM</a></li>
<li><a href="#_pc_98_sound_rom">PC-98 Sound ROM</a></li>
<li><a href="#_pc_98_config_settings">PC-98 config settings</a></li>
<li><a href="#_cd_rom_emulation_in_guest_os">CD-ROM emulation in guest OS</a></li>
<li><a href="#_running_pc_98_games_or_applications">Running PC-98 games or applications</a></li>
</ul>
</li>
<li><a href="#_external_links">External links</a></li>
</ul>
</div>
<div class="paragraph">
<p>Since DOSBox-X aims to be complete DOS emulation package, it officially supports the emulations of the Japanese PC-98 system, which used MS-DOS with modifications to support the PC-98 BIOS and Japanese characters. The NEC PC-9800, also known as the PC-98, were a family of computers made by NEC and sold in Japan throughout 1982 to 2000. Most of the PC-98 software are games, but there are also non-gaming PC-98 applications such as the PC-98 version of Windows 3.1 released by Microsoft. While these were originally designed for the Japanese market, international users who are influenced by the Japanese culture may also want to check this out. For example, earlier Touhou games are PC-98 games, which are well-supported by DOSBox-X&#8217;s PC-98 system.</p>
</div>
<div class="paragraph">
<p>DOSBox-X also supports native DOS/V services and JEGA (AX) emulations so that you can also run programs or games designed for them in these modes. You can activate these modes with the appropriate config options. See the <a href="Guide%3AEast-Asian-language-support-in-DOSBox‐X">East Asian language support guide page</a> for more information.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/zh/3/35/Th04cover.jpg" alt="PC-98 Touhou game: 東方幻想郷 〜 Lotus Land Story">
</div>
</div>
<div class="paragraph">
<p>(PC-98 Touhou game: 東方幻想郷 〜 Lotus Land Story)</p>
</div>
<div class="sect2">
<h3 id="_start_pc_98_emulation">Start PC-98 emulation</h3>
<div class="paragraph">
<p>By default, DOSBox-X starts the standard IBM-compatible DOS system, not the PC-98 system. But you can specify a different system to start with the "machine" option in DOSBox-X&#8217;s configuration file (dosbox-x.conf by default), which offers system types including PC-98. So if you set "machine" to "pc98" (or "pc9801"/"pc9821" which are synonyms for "pc98" at this time), then DOSBox-X will start in the PC-98 emulation mode.</p>
</div>
<div class="paragraph">
<p>Alternative you can specify the PC-98 machine type directly at the command line when starting DOSBox-X, such as <code>dosbox-x -set machine=pc98</code>, which will immediately start DOSBox-X in the PC-98 emulation mode regardless of the settings in the DOSBox-X config file.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pc_98_font_rom">PC-98 font ROM</h3>
<div class="paragraph">
<p>You can start DOSBox-X in PC-98 mode without any additional files apart from the DOSBox-X executable itself. Note, however, that in order for DOSBox-X to display Japanese characters (Kana, Kanji, etc.) correctly you may need to supply a font file. it is still recommended using a font file specifically designed for PC-98.</p>
</div>
<div class="paragraph">
<p>You have a choice of</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Original PC-98 <code>FONT.ROM</code> ROM file. Put the file in the DOSBox-X directory.</p>
</li>
<li>
<p>Free Anex86-compatible font <a href="https://github.com/joncampbell123/dosbox-x/blob/master/contrib/fonts/FREECG98.BMP?raw=true">FREECG98.BMP</a> included with DOSBox-X. Put the file in the DOSBox-X directory. If both <code>FREECG98.BMP</code> and <code>FONT.ROM</code> files are found in the directory then the latter will be used. If both FONT.ROM and FREECG98.BMP are not found in the directory, then DOSBox-X will use internal Japanese font (also used by DOS/V and JEGA systems) and the built-in 8x16 SBCS font pre-generated from FREECG98.BMP. You can also specify a different Anex86-compatible font file with <code>pc-98 anex86 font</code> option in [pc98] section of the DOSBox-X config file.</p>
</li>
<li>
<p>TrueType font (TTF) output option (<code>output=ttf</code>). You will need a Japanese TrueType font. <a href="https://github.com/joncampbell123/dosbox-x/blob/master/contrib/fonts/SarasaGothicFixed.ttf?raw=true">SarasaGothicFixed.ttf</a> and <a href="https://github.com/joncampbell123/dosbox-x/blob/master/contrib/fonts/UnifontFullMediumMono.ttf?raw=true">UnifontFullMediumMono.ttf</a> font files are included with DOSBox-X.
Specify the desired Japanese TrueType font with the <code>font</code> config option in [ttf] section for the TTF output.</p>
</li>
<li>
<p>Use the FONTX2 files. Set your desired 8x16 and 16x16 dot files respectively to <code>pc-98 fontx sbcs</code> and <code>pc-98 fontx dbcs</code> options in the [pc98] section. If there is a problem with the compatibility of hankaku characters in the FONTX2 file, set [pc98] <code>pc-98 fontx internal symbol</code> to true to use the internal Japanese built-in font. (This option is available since 2024.03.01 Release)</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_pc_98_sound_rom">PC-98 Sound ROM</h3>
<div class="paragraph">
<p>There is another PC-98 ROM file named <code>SOUND.ROM</code> which is the ROM image of the PC-98 FM board, which may be needed by some PC-98 games to make music and sound effects.</p>
</div>
</div>
<div class="sect2">
<h3 id="_pc_98_config_settings">PC-98 config settings</h3>
<div class="paragraph">
<p>There are quite a few PC-98 related options in the DOSBox-X config file, such as the options to enable or disable EGC and GRCG graphical functions. These config options can be found in the [pc98] section of the DOSBox-X config file, and many of them can also be toggled in the "PC-98 options" menu group under the "Video" menu. The following config options can be found in the dosbox-x.reference.conf file, while more advanced options can be found in the dosbox-x.reference.full.conf file:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>pc-98 BIOS copyright string</p>
<div class="ulist">
<ul>
<li>
<p>Default value: false</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>If set, the PC-98 BIOS copyright string is placed at E800:0000. Enable this for software that detects PC-98 vs Epson.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 fm board</p>
<div class="ulist">
<ul>
<li>
<p>Default value: auto</p>
</li>
<li>
<p>Possible values: auto, off, false, board14, board26k, board86, board86c</p>
</li>
<li>
<p>Select the FM music board to emulate in PC-98 mode. No boards are emulated when <code>off</code> or <code>false</code>. <code>board86c</code>, <code>auto</code> will emulate PC-9801-86+Chibioto(ちびおと), <code>board86</code>: PC-9801-86, <code>board26k</code>: PC-9801-26K and <code>board14</code>: PC-9801-14. <code>board86</code> option should work fine in most cases.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 sound bios</p>
<div class="ulist">
<ul>
<li>
<p>Default value: false</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Set Memory switch 4-3. Try switching this option to true if you hear no sound in some games.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 load sound bios rom file</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Load <code>SOUND.ROM</code> dumped from actual machine if present. This is strongly recommended.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 enable 256-color</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Allow 256-color graphics mode if set, disable if not set.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 enable 16-color</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Allow 16-color graphics mode if set, disable if not set.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 enable grcg</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Allow GRCG graphics functions if set. Need to be set for games requiring PC-9801VM and later, default value should be fine.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 enable egc</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Allow EGC graphics functions if set. Need to be set for games requiring PC-9801VX and later, default value should be fine.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 start gdc at 5mhz</p>
<div class="ulist">
<ul>
<li>
<p>Default value: false</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Set GDC clock to 5MHz if true. A number of games require this option to be false (2.5MHz) while very few games require 5MHz, so leave it false unless you know what you are doing. If you see graphical glitches, you may want to try toggle this option.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 bus mouse</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>Enable PC-98 bus mouse emulation. Disabling this option does not disable INT 33h emulation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 nec mouse function</p>
<div class="ulist">
<ul>
<li>
<p>Default value: false</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>NEC MOUSE.SYS emulation is enabled if set to true, or else Microsoft MOUSE.COM emulation will be enabled.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 force ibm keyboard layout</p>
<div class="ulist">
<ul>
<li>
<p>Default value: auto</p>
</li>
<li>
<p>Possible values: true, false, auto</p>
</li>
<li>
<p>Force to use a default keyboard layout like IBM US-English for PC-98 emulation. Works with PC-98 software using BIOS for keyboard.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 force JIS keyboard layout</p>
<div class="ulist">
<ul>
<li>
<p>Default value: false</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>If true, keys for Backtick(`) and Tilde (~) will match those of JP106 keyboard instead of real PC-98 keyboard. Works with PC-98 software using BIOS for keyboard. This option is neglected if <code>pc-98 force ibm keyboard layout</code> option is true.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 try font rom</p>
<div class="ulist">
<ul>
<li>
<p>Default value: true</p>
</li>
<li>
<p>Possible values: true, false</p>
</li>
<li>
<p>If enabled, DOSBox-X will first try to load FONT.ROM as generated by T98Tools for PC-98 emulation.</p>
</li>
</ul>
</div>
</li>
<li>
<p>pc-98 anex86 font</p>
<div class="ulist">
<ul>
<li>
<p>Default value:</p>
</li>
<li>
<p>Specify an Anex86 compatible font to load as supported by the Anex86 emulator for PC-98 emulation. By default, DOSBox-X tries to load ANEX86.BMP followed by FREECG98.BMP after trying to load FONT.ROM. If you specify a font here then it will be tried first, perhaps before FONT.ROM (see previous option).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="paragraph">
<p>You may not need to change most config options for PC-98 mode, although you may want to take a look at the last one <code>pc-98 anex86 font</code> if you want to specify a different font for PC-98, and/or <code>pc-98 force ibm keyboard layout</code> if you are not a Japanese user. DOSBox-X will decide whether to use the Japanese keyboard layout or the U.S. keyboard layout for the PC-98 emulation based on its detection of user&#8217;s keyboard layout by default, but for earlier versions DOSBox-X always defaulted to the Japanese keyboard layout since PC-98 system was originally designed for the Japanese market, and users outside Japan who want to use the PC-98 system may want to change the setting to the default U.S. keyboard layout instead, which can be done by setting <code>pc-98 force ibm keyboard layout</code> to <code>true</code>, or it may be enabled via the <code>Use US keyboard layout</code> menu option in the "PC-98 options" menu group. With this enabled you will be able to use DOSBox-X&#8217;s PC-98 system more easily with the standard U.S. keyboard layout.</p>
</div>
</div>
<div class="sect2">
<h3 id="_cd_rom_emulation_in_guest_os">CD-ROM emulation in guest OS</h3>
<div class="paragraph">
<p>If you need to boot guest OS and read CD-ROM, you need to load a CD-ROM driver.
NEC provides several drivers, <code>NECCDC.SYS</code> is recommended among them. (<code>NECCDD.SYS</code> may be used for recent DOSBox-X releases)</p>
</div>
<div class="paragraph">
<p>PC-98 mostly assume IDE slot of CD-ROM to be <code>Secondary-Master</code> (-ide 2m), and the drive letter to be <code>Q:</code>.</p>
</div>
<div class="paragraph">
<p>In <code>CONFIG.SYS</code> set</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">DEVICE=NECCDC.SYS /D:CD_101
LASTDRIVE=Z</code></pre>
</div>
</div>
<div class="paragraph">
<p>And in <code>AUTOEXEC.BAT</code> set</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">MSCDEX /D:CD_101 /L:Q</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_running_pc_98_games_or_applications">Running PC-98 games or applications</h3>
<div class="paragraph">
<p>Once you are in DOSBox-X&#8217;s PC-98 system, you can start preparing for playing PC-98 games or running PC-98 applications. First you need to mount a drive for use with PC-98 games or applications. The drive can be mounted either from a drive or directory in the host system, or from a disk image. In general mounting drives in PC-98 mode follows the same procedures as in DOSBox-X&#8217;s standard mode, although disk images for PC-98 systems may come with HDI or FDD formats rather than the IMG format which is typically seen in a standard system. In any case you can mount the drives with either MOUNT or IMGMOUNT command as usual, or it can be done from the "Drive" menu.</p>
</div>
<div class="paragraph">
<p>An example of using MOUNT command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">MOUNT C C:\PC98</code></pre>
</div>
</div>
<div class="paragraph">
<p>An example of using IMGMOUNT command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">IMGMOUNT C D:\PC98.HDI</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once a drive is mounted, you can enter the drive directory and start the desired game or application, or boot from the drive in the case of bootable disk images. The actual steps are also similar to how they are done in DOSBox-X&#8217;s standard system. For example, you can install and run the PC-98 version of Windows 3.1 in DOSBox-X&#8217;s PC-98 system the same way as you install and run the standard version of Windows 3.1 in DOSBox-X&#8217;s default machine type.</p>
</div>
<div class="sect3">
<h4 id="_example_touhou_games_in_dosbox_x">Example: Touhou games in DOSBox-X</h4>
<div class="imageblock">
<div class="content">
<img src="https://upload.wikimedia.org/wikipedia/zh/4/46/Mystic_Square.png" alt="The 5th Touhou game: 東方怪綺談 〜 Mystic Square">
</div>
</div>
<div class="paragraph">
<p>(The 5th Touhou game: 東方怪綺談 〜 Mystic Square)</p>
</div>
<div class="paragraph">
<p>The Touhou games are a series of bullet shooting games that are especially famous in the Doujin world. The first five games were targeted for PC-98, so you can actually run them in DOSBox-X&#8217;s PC-98 mode.</p>
</div>
<div class="paragraph">
<p>Assuming you have the HDI images for any of these Touhou games, you can mount them as the C drive and then either start the game directly or boot from the drive. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">IMGMOUNT C TOUHOU1.HDI
C:
GAME</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or boot from the drive:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-console" data-lang="console">IMGMOUNT C TOUHOU1.HDI
BOOT C:</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_external_links">External links</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Some external links with useful information:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/PC-9800_series">Wikipedia: PC-9800 series</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Touhou_Project#PC-98_games">Wikipedia: Touhou Project - PC-98 games</a></p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2024-10-21 21:27:11 +0900
</div>
</div>
</body>
</html>
